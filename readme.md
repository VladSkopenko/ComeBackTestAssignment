# Інструмент автоматизованого форматування наукових статей

## Опис
Цей проект є веб-сервісом для автоматизованого форматування наукових статей у стилі APA (Journal of Applied Psychology). Користувачі можуть завантажувати свої документи у форматі Word, обирати журнал для публікації, а система автоматично надає пропозиції щодо виправлення форматування відповідно до вимог цього журналу.

## Мета
Забезпечити автоматичне форматування наукових статей для економії часу та зменшення помилок форматування.

---

## Опис рішення

### Підхід до розробки вебсервісу
Вебсервіс розробляється на основі FastAPI для обробки запитів, управління завантаженням і форматуванням документів. Основні етапи роботи сервісу:

1. **Завантаження документів**: 
   - Користувач завантажує документ Word через інтерфейс сервісу.
   - Завантажені документи зберігаються у Dropbox для подальшої обробки.
   - Python-бібліотека `python-docx` використовується для роботи з вмістом Word-документів.

2. **Визначення цитувань**:
   - Для виявлення та перевірки цитувань, що відповідають вимогам APA, використовується бібліотека `regex`.
   - Цитати, що слідують формату (Автор, Рік), ідентифікуються та перевіряються на відповідність вимогам журналу.

3. **Аналіз та пропозиції з форматування**:
   - Аналізуються елементи документа (шрифти, відступи, заголовки, список літератури) для відповідності стилю APA.
   - Сервіс надає пропозиції з виправлення таких елементів, як:
     - Шрифти
     - Відступи
     - Заголовки
     - Список літератури

4. **Експорт виправленого документа**:
   - Після внесення користувачем затверджених змін генерується кінцевий документ з форматуванням APA.
   - Експортований документ доступний користувачу для завантаження.

### Використані бібліотеки та інструменти
- **FastAPI** — для реалізації API.
- **PostgreSQL** — для зберігання даних про документи, статус перевірки і пропозиції змін.
- **Docker і Docker Compose** — для контейнеризації і налаштування середовища.
- **Dropbox** — для зберігання та завантаження документів користувачів.
- **Alembic** — для керування міграціями бази даних.
- **Pydantic** — для валідації даних.
- **python-docx** — для обробки та аналізу Word-документів.
- **Regex** — для виявлення цитувань і перевірки відповідності правил стилю APA.

---

## Виклики та рішення

1. **Виявлення різних форматів цитування**:
   - Виклик: Різні стилі цитування можуть використовуватись у тексті.
   - Рішення: Застосування регулярних виразів (regex) для точного визначення цитувань відповідно до стилю APA.

2. **Застосування правил форматування до різних частин документа**:
   - Виклик: Розділи статті можуть потребувати унікального форматування.
   - Рішення: Створення окремих функцій для перевірки та виправлення форматування кожного елемента.

3. **Обмеження розміру файлу**:
   - **Виклик**: Користувачі можуть намагатись завантажити файли, що перевищують встановлені обмеження.
   - **Рішення**: Встановлення обмежень на максимальний розмір файлу та перевірка цього перед завантаженням. Якщо файл занадто великий, користувачу буде виведено відповідне повідомлення.

4. **Файли з однаковими назвами**:
   - **Виклик**: Файли з однаковими назвами можуть викликати конфлікти при завантаженні.
   - **Рішення**: Генерація унікальних імен для файлів, що вже існують в системі, шляхом додавання числових індексів до назв файлів або створення нових шляхів для завантаження.

5. **Прив'язка файлів до користувачів**:
   - **Виклик**: Потрібно відслідковувати, які файли належать конкретному користувачу.
   - **Рішення**: Збереження метаданих про файли в базі даних, де кожен файл буде прив'язаний до конкретного користувача через унікальний ідентифікатор.Таблиця один до багатьох в базі даних
---

## Тестування та перевірка

Для перевірки точності форматування проводиться автоматизоване тестування:
- Використання тестових документів для перевірки коректності аналізу цитувань і форматування.
- Тестування основних функцій сервісу з використанням unit-тестів для контролю якості обробки тексту.

---

## Загальний план роботи

1. Розробка основних функцій для завантаження документів.
2. Реалізація механізму визначення цитувань і перевірки на відповідність стилю APA.
3. Додавання функцій для виявлення та виправлення невідповідностей форматування.
4. Впровадження експорту документів із внесеними виправленнями.
5. Створення автоматизованих тестів для перевірки точності роботи сервісу.
